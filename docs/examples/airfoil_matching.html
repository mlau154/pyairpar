<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>pyairpar.examples.airfoil_matching API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pyairpar.examples.airfoil_matching</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import numpy as np
import os
from matplotlib.pyplot import show
from matplotlib.lines import Line2D
from copy import deepcopy

from pyairpar.utils.airfoil_matching import match_airfoil
from pyairpar.utils.get_airfoil import extract_data_from_airfoiltools
from pyairpar.core.airfoil import Airfoil
from pyairpar.core.base_airfoil_params import BaseAirfoilParams
from pyairpar.core.param import Param
from pyairpar.core.free_point import FreePoint


def repair_example_sd7062(xy: np.ndarray):
    r&#34;&#34;&#34;
    ### Description:

    An example of how to repair a poorly-defined set of discrete airfoil coordinates.

    ### Args:

    `xy`: `np.ndarray` of `shape=(N, 2)` describing the set of &#34;discrete&#34; airfoil coordinates, where `N` is the number
    of coordinates, and the columns represent \(x\) and \(y\)

    ### Returns:

    The modified xy array
    &#34;&#34;&#34;
    xy[-1, 0] = 1
    xy[-1, 1] = 0
    return xy


def run():
    r&#34;&#34;&#34;
    ### Description:

    An example of an implementation of `pyairpar.utils.airfoil_matching.match_airfoil()` using the sd7062-il airfoil.
    Note that the match is imperfect because the set of discrete airfoil coordinates does not have its leading edge
    at exactly \((0,0)\), and the trailing edge had to be repaired because of a self-intersection.
    &#34;&#34;&#34;
    airfoil_to_match = &#39;sd7062-il&#39;
    airfoil_to_match_xy = extract_data_from_airfoiltools(airfoil_to_match, repair=repair_example_sd7062)
    base_airfoil_params = BaseAirfoilParams(c=Param(1.0, active=False),
                                            alf=Param(np.deg2rad(0.0), active=False),
                                            R_le=Param(0.06, &#39;length&#39;, bounds=np.array([1e-5, 0.3])),
                                            L_le=Param(0.08, &#39;length&#39;, bounds=np.array([1e-5, 0.2])),
                                            r_le=Param(0.6, bounds=np.array([0.01, 0.99])),
                                            phi_le=Param(np.deg2rad(5.0), bounds=np.array([-np.pi / 4, np.pi / 4])),
                                            psi1_le=Param(np.deg2rad(10.0),
                                                          bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            psi2_le=Param(np.deg2rad(15.0),
                                                          bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            L1_te=Param(0.25, &#39;length&#39;, bounds=np.array([1e-5, 1.0])),
                                            L2_te=Param(0.3, &#39;length&#39;, bounds=np.array([1e-5, 1.0])),
                                            theta1_te=Param(np.deg2rad(14.0),
                                                            bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            theta2_te=Param(np.deg2rad(1.0),
                                                            bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            t_te=Param(0.0, &#39;length&#39;, active=False),
                                            r_te=Param(0.5, active=False),
                                            phi_te=Param(np.deg2rad(0.0), active=False),
                                            non_dim_by_chord=True
                                            )

    free_point1 = FreePoint(x=Param(0.35, &#39;length&#39;, bounds=np.array([0.05, 0.95])),
                            y=Param(0.2, &#39;length&#39;, bounds=np.array([0.05, 0.95])), previous_anchor_point=&#39;te_1&#39;,
                            length_scale_dimension=base_airfoil_params.c.value)

    free_point2 = FreePoint(x=Param(0.5, &#39;length&#39;, bounds=np.array([0.05, 0.95])),
                            y=Param(-0.05, &#39;length&#39;, bounds=np.array([0.05, 0.95])), previous_anchor_point=&#39;le&#39;,
                            length_scale_dimension=base_airfoil_params.c.value)

    free_point_tuple = (free_point1, free_point2)

    airfoil = Airfoil(number_coordinates=100,
                      base_airfoil_params=base_airfoil_params,
                      anchor_point_tuple=(),
                      free_point_tuple=free_point_tuple)

    starting_airfoil = deepcopy(airfoil)

    fig, axs = airfoil.plot((&#39;airfoil&#39;,), show_plot=False, show_legend=False,
                            plot_kwargs=[{&#39;color&#39;: &#39;indianred&#39;, &#39;ls&#39;: &#39;-.&#39;}] * 2)
    starting_airfoil_proxy = Line2D([], [], color=&#39;indianred&#39;, ls=&#39;-.&#39;)

    axs.plot(airfoil_to_match_xy[:, 0], airfoil_to_match_xy[:, 1], color=&#39;black&#39;, ls=&#39;&#39;, marker=&#39;o&#39;, fillstyle=&#39;none&#39;)
    airfoil_to_match_proxy = Line2D([], [], color=&#39;black&#39;, ls=&#39;&#39;, marker=&#39;o&#39;, fillstyle=&#39;none&#39;)

    print(f&#34;Showing initial guess. Close the plot to continue.&#34;)
    show()

    print(f&#34;Matching airfoil shape...&#34;)

    match_airfoil(airfoil, airfoil_to_match=airfoil_to_match, repair=repair_example_sd7062)

    fig, axs = airfoil.plot((&#39;airfoil&#39;,), show_plot=False, show_legend=False,
                            plot_kwargs=[{&#39;color&#39;: &#39;cornflowerblue&#39;, &#39;ls&#39;: &#39;--&#39;}] * 2)
    final_airfoil_proxy = Line2D([], [], color=&#39;cornflowerblue&#39;, ls=&#39;--&#39;)

    starting_airfoil.plot((&#39;airfoil&#39;,), fig=fig, axs=axs, show_plot=False, show_legend=False,
                          plot_kwargs=[{&#39;color&#39;: &#39;indianred&#39;, &#39;ls&#39;: &#39;-.&#39;}] * 2)

    axs.plot(airfoil_to_match_xy[:, 0], airfoil_to_match_xy[:, 1], color=&#39;black&#39;, ls=&#39;&#39;, marker=&#39;o&#39;, fillstyle=&#39;none&#39;)

    fig.legend([starting_airfoil_proxy, airfoil_to_match_proxy, final_airfoil_proxy], [&#39;starting airfoil&#39;,
                                                                                       &#39;airfoil to match&#39;,
                                                                                       &#39;final airfoil&#39;], fontsize=12)
    axs.set_xlabel(r&#39;$x/c$&#39;, fontsize=14)
    axs.set_ylabel(r&#39;$y/c$&#39;, fontsize=14)

    fig.tight_layout()

    show()

    save_plot = False
    if save_plot:
        fig.suptitle(&#39;&#39;)
        fig.savefig(os.path.join(os.path.dirname(os.path.dirname(os.getcwd())),
                                 &#39;docs&#39;, &#39;images&#39;, &#39;sd7062_matching.png&#39;), dpi=600)
        fig.savefig(os.path.join(os.path.dirname(os.path.dirname(os.getcwd())),
                                 &#39;docs&#39;, &#39;images&#39;, &#39;sd7062_matching.pdf&#39;))


if __name__ == &#39;__main__&#39;:
    run()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="pyairpar.examples.airfoil_matching.repair_example_sd7062"><code class="name flex">
<span>def <span class="ident">repair_example_sd7062</span></span>(<span>xy: numpy.ndarray)</span>
</code></dt>
<dd>
<div class="desc"><h3 id="description">Description:</h3>
<p>An example of how to repair a poorly-defined set of discrete airfoil coordinates.</p>
<h3 id="args">Args:</h3>
<p><code>xy</code>: <code>np.ndarray</code> of <code>shape=(N, 2)</code> describing the set of "discrete" airfoil coordinates, where <code>N</code> is the number
of coordinates, and the columns represent <span><span class="MathJax_Preview">x</span><script type="math/tex">x</script></span> and <span><span class="MathJax_Preview">y</span><script type="math/tex">y</script></span></p>
<h3 id="returns">Returns:</h3>
<p>The modified xy array</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def repair_example_sd7062(xy: np.ndarray):
    r&#34;&#34;&#34;
    ### Description:

    An example of how to repair a poorly-defined set of discrete airfoil coordinates.

    ### Args:

    `xy`: `np.ndarray` of `shape=(N, 2)` describing the set of &#34;discrete&#34; airfoil coordinates, where `N` is the number
    of coordinates, and the columns represent \(x\) and \(y\)

    ### Returns:

    The modified xy array
    &#34;&#34;&#34;
    xy[-1, 0] = 1
    xy[-1, 1] = 0
    return xy</code></pre>
</details>
</dd>
<dt id="pyairpar.examples.airfoil_matching.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"><h3 id="description">Description:</h3>
<p>An example of an implementation of <code><a title="pyairpar.utils.airfoil_matching.match_airfoil" href="../utils/airfoil_matching.html#pyairpar.utils.airfoil_matching.match_airfoil">match_airfoil()</a></code> using the sd7062-il airfoil.
Note that the match is imperfect because the set of discrete airfoil coordinates does not have its leading edge
at exactly <span><span class="MathJax_Preview">(0,0)</span><script type="math/tex">(0,0)</script></span>, and the trailing edge had to be repaired because of a self-intersection.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run():
    r&#34;&#34;&#34;
    ### Description:

    An example of an implementation of `pyairpar.utils.airfoil_matching.match_airfoil()` using the sd7062-il airfoil.
    Note that the match is imperfect because the set of discrete airfoil coordinates does not have its leading edge
    at exactly \((0,0)\), and the trailing edge had to be repaired because of a self-intersection.
    &#34;&#34;&#34;
    airfoil_to_match = &#39;sd7062-il&#39;
    airfoil_to_match_xy = extract_data_from_airfoiltools(airfoil_to_match, repair=repair_example_sd7062)
    base_airfoil_params = BaseAirfoilParams(c=Param(1.0, active=False),
                                            alf=Param(np.deg2rad(0.0), active=False),
                                            R_le=Param(0.06, &#39;length&#39;, bounds=np.array([1e-5, 0.3])),
                                            L_le=Param(0.08, &#39;length&#39;, bounds=np.array([1e-5, 0.2])),
                                            r_le=Param(0.6, bounds=np.array([0.01, 0.99])),
                                            phi_le=Param(np.deg2rad(5.0), bounds=np.array([-np.pi / 4, np.pi / 4])),
                                            psi1_le=Param(np.deg2rad(10.0),
                                                          bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            psi2_le=Param(np.deg2rad(15.0),
                                                          bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            L1_te=Param(0.25, &#39;length&#39;, bounds=np.array([1e-5, 1.0])),
                                            L2_te=Param(0.3, &#39;length&#39;, bounds=np.array([1e-5, 1.0])),
                                            theta1_te=Param(np.deg2rad(14.0),
                                                            bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            theta2_te=Param(np.deg2rad(1.0),
                                                            bounds=np.array([-np.pi / 2.1, np.pi / 2.1])),
                                            t_te=Param(0.0, &#39;length&#39;, active=False),
                                            r_te=Param(0.5, active=False),
                                            phi_te=Param(np.deg2rad(0.0), active=False),
                                            non_dim_by_chord=True
                                            )

    free_point1 = FreePoint(x=Param(0.35, &#39;length&#39;, bounds=np.array([0.05, 0.95])),
                            y=Param(0.2, &#39;length&#39;, bounds=np.array([0.05, 0.95])), previous_anchor_point=&#39;te_1&#39;,
                            length_scale_dimension=base_airfoil_params.c.value)

    free_point2 = FreePoint(x=Param(0.5, &#39;length&#39;, bounds=np.array([0.05, 0.95])),
                            y=Param(-0.05, &#39;length&#39;, bounds=np.array([0.05, 0.95])), previous_anchor_point=&#39;le&#39;,
                            length_scale_dimension=base_airfoil_params.c.value)

    free_point_tuple = (free_point1, free_point2)

    airfoil = Airfoil(number_coordinates=100,
                      base_airfoil_params=base_airfoil_params,
                      anchor_point_tuple=(),
                      free_point_tuple=free_point_tuple)

    starting_airfoil = deepcopy(airfoil)

    fig, axs = airfoil.plot((&#39;airfoil&#39;,), show_plot=False, show_legend=False,
                            plot_kwargs=[{&#39;color&#39;: &#39;indianred&#39;, &#39;ls&#39;: &#39;-.&#39;}] * 2)
    starting_airfoil_proxy = Line2D([], [], color=&#39;indianred&#39;, ls=&#39;-.&#39;)

    axs.plot(airfoil_to_match_xy[:, 0], airfoil_to_match_xy[:, 1], color=&#39;black&#39;, ls=&#39;&#39;, marker=&#39;o&#39;, fillstyle=&#39;none&#39;)
    airfoil_to_match_proxy = Line2D([], [], color=&#39;black&#39;, ls=&#39;&#39;, marker=&#39;o&#39;, fillstyle=&#39;none&#39;)

    print(f&#34;Showing initial guess. Close the plot to continue.&#34;)
    show()

    print(f&#34;Matching airfoil shape...&#34;)

    match_airfoil(airfoil, airfoil_to_match=airfoil_to_match, repair=repair_example_sd7062)

    fig, axs = airfoil.plot((&#39;airfoil&#39;,), show_plot=False, show_legend=False,
                            plot_kwargs=[{&#39;color&#39;: &#39;cornflowerblue&#39;, &#39;ls&#39;: &#39;--&#39;}] * 2)
    final_airfoil_proxy = Line2D([], [], color=&#39;cornflowerblue&#39;, ls=&#39;--&#39;)

    starting_airfoil.plot((&#39;airfoil&#39;,), fig=fig, axs=axs, show_plot=False, show_legend=False,
                          plot_kwargs=[{&#39;color&#39;: &#39;indianred&#39;, &#39;ls&#39;: &#39;-.&#39;}] * 2)

    axs.plot(airfoil_to_match_xy[:, 0], airfoil_to_match_xy[:, 1], color=&#39;black&#39;, ls=&#39;&#39;, marker=&#39;o&#39;, fillstyle=&#39;none&#39;)

    fig.legend([starting_airfoil_proxy, airfoil_to_match_proxy, final_airfoil_proxy], [&#39;starting airfoil&#39;,
                                                                                       &#39;airfoil to match&#39;,
                                                                                       &#39;final airfoil&#39;], fontsize=12)
    axs.set_xlabel(r&#39;$x/c$&#39;, fontsize=14)
    axs.set_ylabel(r&#39;$y/c$&#39;, fontsize=14)

    fig.tight_layout()

    show()

    save_plot = False
    if save_plot:
        fig.suptitle(&#39;&#39;)
        fig.savefig(os.path.join(os.path.dirname(os.path.dirname(os.getcwd())),
                                 &#39;docs&#39;, &#39;images&#39;, &#39;sd7062_matching.png&#39;), dpi=600)
        fig.savefig(os.path.join(os.path.dirname(os.path.dirname(os.getcwd())),
                                 &#39;docs&#39;, &#39;images&#39;, &#39;sd7062_matching.pdf&#39;))</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pyairpar.examples" href="index.html">pyairpar.examples</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="pyairpar.examples.airfoil_matching.repair_example_sd7062" href="#pyairpar.examples.airfoil_matching.repair_example_sd7062">repair_example_sd7062</a></code></li>
<li><code><a title="pyairpar.examples.airfoil_matching.run" href="#pyairpar.examples.airfoil_matching.run">run</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>